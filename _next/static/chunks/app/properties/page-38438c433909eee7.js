(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{4645:function(e,a,r){Promise.resolve().then(r.bind(r,6802))},8033:function(e,a){"use strict";let r="https://api.refty.ai";a.Z=(e,a)=>void 0===a?fetch(r+e,a):fetch(r+e)},6802:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return Page}});var n=r(7437),l=r(2265),t=r(4033),o=r(1396),s=r.n(o);let i=[null,{id:1,level:0,externalID:1,name:"Residential",name_l1:"سكني",name_l2:"居住物业",name_l3:"Жилые",slug:"residential",nameSingular:"Residential",nameSingular_l1:"سكني",nameSingular_l2:"居住物业",nameSingular_l3:"Жилые"},{id:2,level:1,externalID:4,name:"Apartments",name_l1:"شقق",name_l2:"公寓",name_l3:"Апартаменты",slug:"apartments",nameSingular:"Apartment",nameSingular_l1:"شقة",nameSingular_l2:"公寓",nameSingular_l3:"Квартира"},{id:3,level:0,externalID:2,name:"Commercial",name_l1:"تجاري",name_l2:"商用物业",name_l3:"Коммерческие",slug:"commercial",nameSingular:"Commercial",nameSingular_l1:"تجاري",nameSingular_l2:"商用物业",nameSingular_l3:"Коммерческий"},{id:4,level:1,externalID:5,name:"Offices",name_l1:"مکاتب",name_l2:"写字楼",name_l3:"Офисы",slug:"offices",nameSingular:"Office",nameSingular_l1:"مکتب",nameSingular_l2:"写字楼",nameSingular_l3:"Офис"},{id:5,level:1,externalID:3,name:"Villas",name_l1:"فلل",name_l2:"别墅",name_l3:"Виллы",slug:"villas",nameSingular:"Villa",nameSingular_l1:"فیلا",nameSingular_l2:"别墅",nameSingular_l3:"Вилла"},{id:6,level:1,externalID:9,name:"Labour Camps",name_l1:"مساكن عمال",name_l2:"员工宿舍",name_l3:"Трудовые лагеря",slug:"labour-camps",nameSingular:"Labour Camp",nameSingular_l1:"سكن عمال",nameSingular_l2:"员工宿舍",nameSingular_l3:"Трудовой лагерь"},{id:7,level:1,externalID:7,name:"Warehouses",name_l1:"مستودعات",name_l2:"仓库",name_l3:"Складские помещения",slug:"warehouses",nameSingular:"Warehouse",nameSingular_l1:"مستودع",nameSingular_l2:"仓库",nameSingular_l3:"Склад"},{id:8,level:1,externalID:16,name:"Townhouses",name_l1:"تاون هاوس",name_l2:"联排别墅",name_l3:"Таунхаусы",slug:"townhouses",nameSingular:"Townhouse",nameSingular_l1:"تاون هاوس",nameSingular_l2:"联排别墅",nameSingular_l3:"Таунхаус"},{id:9,level:1,externalID:21,name:"Hotel Apartments",name_l1:"شقق فندقية",name_l2:"酒店式公寓",name_l3:"Апартаменты в отеле",slug:"hotel-apartments",nameSingular:"Hotel Apartment",nameSingular_l1:"شقة فندقية",nameSingular_l2:"酒店式公寓",nameSingular_l3:"Апартаменты в отеле"},{id:10,level:1,externalID:17,name:"Buildings",name_l1:"مباني سكنية",name_l2:"住宅楼",name_l3:"Здания",slug:"residential-building",nameSingular:"Building",nameSingular_l1:"مبنى سكني",nameSingular_l2:"住宅楼",nameSingular_l3:"Здание"},{id:11,level:1,externalID:14,name:"Plots",name_l1:"اراضي سكنية",name_l2:"住宅地块",name_l3:"Участки",slug:"residential-plots",nameSingular:"Plot",nameSingular_l1:"ارض سكنية",nameSingular_l2:"住宅地块",nameSingular_l3:"Участок"},{id:12,level:1,externalID:19,name:"Villa Compounds",name_l1:"فلل مجمعات سكنية",name_l2:"别墅区",name_l3:"Комплексы вилл",slug:"villa-compound",nameSingular:"Villa Compound",nameSingular_l1:"فيلا مجمع سكني",nameSingular_l2:"别墅区",nameSingular_l3:"Комплекс вилл"},{id:13,level:1,externalID:6,name:"Shops",name_l1:"محلات تجارية",name_l2:"商铺",name_l3:"Магазины",slug:"shops",nameSingular:"Shop",nameSingular_l1:"محل تجاري",nameSingular_l2:"商铺",nameSingular_l3:"Магазин"},{id:14,level:1,externalID:23,name:"Mixed Use Land",name_l1:"ارض استخدام متعدد",name_l2:"混合用途用地",name_l3:"Земли смешанного использования",slug:"mixed-use-land",nameSingular:"Mixed Use Land",nameSingular_l1:"ارض استخدام متعدد",nameSingular_l2:"混合用途用地",nameSingular_l3:"Земля смешанного использования"},{id:15,level:1,externalID:15,name:"Plots",name_l1:"اراضي تجارية",name_l2:"商业地块",name_l3:"Участки",slug:"commercial-plots",nameSingular:"Plot",nameSingular_l1:"ارض تجارية",nameSingular_l2:"商业地块",nameSingular_l3:"Участок"},{id:16,level:1,externalID:18,name:"Penthouses",name_l1:"بنتهاوس",name_l2:"顶楼公寓",name_l3:"Пентхаусы",slug:"penthouse",nameSingular:"Penthouse",nameSingular_l1:"بنتهاوس",nameSingular_l2:"顶楼公寓",nameSingular_l3:"Пентхаус"},{id:17,level:1,externalID:25,name:"Villas",name_l1:"فلل تجارية",name_l2:"商业别墅",name_l3:"Виллы",slug:"commercial-villas",nameSingular:"Villa",nameSingular_l1:"فيلا تجارية",nameSingular_l2:"商业别墅",nameSingular_l3:"Вилла"},{id:18,level:1,externalID:13,name:"Floors",name_l1:"طوابق تجارية",name_l2:"商业楼层",name_l3:"Этажи",slug:"commercial-floors",nameSingular:"Floor",nameSingular_l1:"طابق تجاري",nameSingular_l2:"商业楼层",nameSingular_l3:"Этаж"},{id:19,level:1,externalID:20,name:"Bulk Units",name_l1:"مجمعات سكنية",name_l2:"大型综合物业",name_l3:"Массовые единицы",slug:"bulk-units",nameSingular:"Bulk Unit",nameSingular_l1:"مجمع سكني",nameSingular_l2:"大型综合物业",nameSingular_l3:"Массовая единица"},{id:20,level:1,externalID:12,name:"Floors",name_l1:"طوابق سكنية",name_l2:"住宅楼层",name_l3:"Этажи",slug:"residential-floors",nameSingular:"Floor",nameSingular_l1:"طابق سكني",nameSingular_l2:"住宅楼层",nameSingular_l3:"Этаж"},{id:21,level:1,externalID:10,name:"Buildings",name_l1:"مباني تجارية",name_l2:"商业大厦",name_l3:"Здания",slug:"commercial-buildings",nameSingular:"Building",nameSingular_l1:"مبنی تجاري",nameSingular_l2:"商业大厦",nameSingular_l3:"Здание"},{id:22,level:1,externalID:8,name:"Factories",name_l1:"مصانع",name_l2:"工厂",name_l3:"Фабрики",slug:"factories",nameSingular:"Factory",nameSingular_l1:"مصنع",nameSingular_l2:"工厂",nameSingular_l3:"Фабрика"},{id:23,level:1,externalID:24,name:"Showrooms",name_l1:"معارض تجارية",name_l2:"展览店面",name_l3:"Выставочные залы",slug:"showrooms",nameSingular:"Showroom",nameSingular_l1:"معرض تجاري",nameSingular_l2:"展览店面",nameSingular_l3:"Выставочный зал"},{id:24,level:1,externalID:22,name:"Industrial Land",name_l1:"ارض صناعية",name_l2:"工业用地",name_l3:"Земли промышленного назначения",slug:"industrial-land",nameSingular:"Industrial Land",nameSingular_l1:"ارض صناعية",nameSingular_l2:"工业用地",nameSingular_l3:"Земля промышленного назначения"},{id:25,level:1,externalID:11,name:"Other Commercial",name_l1:"عقارات تجارية أخرى",name_l2:"其他商用物业",name_l3:"Другие коммерческие",slug:"commerical-properties",nameSingular:"Other Commercial",nameSingular_l1:"Other Commercial",nameSingular_l2:"其他商用物业",nameSingular_l3:"Другое коммерческое"}].reduce((e,a)=>(a&&(e[a.id]=a,e[a.slug]=a),e),{}),u=[{key:"residential",subcategories:[{key:"apartments"},{key:"townhouses"},{key:"villas"},{key:"villa-compound"},{key:"residential-plots"},{key:"residential-building"},{key:"penthouse"},{key:"hotel-apartments"},{key:"residential-floors"}]},{key:"commercial",subcategories:[{key:"offices"},{key:"shops"},{key:"warehouses"},{key:"showrooms"},{key:"labour-camps"},{key:"mixed-use-land"},{key:"bulk-units"},{key:"factories"},{key:"industrial-land"},{key:"commercial-plots"},{key:"commercial-villas"},{key:"commercial-floors"},{key:"commercial-buildings"},{key:"commerical-properties"}]}].map(e=>{if(!(e.key in i))throw Error();let a={...i[e.key],subcategories:[]};return a.subcategories=e.subcategories.map(e=>{if(!(e.key in i))throw Error();return i[e.key]}),a});function useCurrency(){let[e,a]=(0,l.useState)("aed");return[e,e=>{e&&(localStorage.setItem("currency",e),a(e))},()=>{{let e=localStorage.getItem("currency");e&&["usd","aed"].includes(e)?a(e):a("aed")}}]}function validators_isStringPositiveFloat(e){return"string"==typeof e&&/^(([1-9]\d*$)|(((0|[1-9]\d*)\.\d+))?)$/.test(e)}function sqmToSqft(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(round(10.7639*Number(e),a)):round(10.7639*Number(e),a);throw Error("roundAcuracity must be greater than 0")}function sqftToSqm(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(round(Number(e)/10.7639,a)):round(Number(e)/10.7639,a);throw Error("roundAcuracity must be greater than 0")}function usdToAed(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(round(3.75*Number(e),a)):round(3.75*Number(e),a);throw Error("roundAcuracity must be greater than 0")}function aedToUsd(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(round(Number(e)/3.75,a)):round(Number(e)/3.75,a);throw Error("roundAcuracity must be greater than 0")}function round(e,a){if("number"==typeof e){if(void 0===a)return e;if(0===a)return Math.round(e);if(a>0)return Math.round(e*10**a)/10**a}if("string"==typeof e){if(void 0===a)return String(Number(e));if(0===a)return String(Math.round(Number(e)));if(a>0)return String(Math.round(Number(e)*10**a)/10**a)}throw Error("roundAcuracity must be greater than 0")}function PropertyCard(e){let{property:a}=e,[r,t,o]=useCurrency();(0,l.useEffect)(()=>{o()},[r]);let{id:u,title:c,price:d,locationHierarchy:m,purpose:p,categories:g,area:h}=a;return(0,n.jsxs)(s(),{href:"/property?id=".concat(u),className:"p-5 border border-cyan-950",children:[(0,n.jsx)("h1",{children:c}),(0,n.jsxs)("h1",{children:["Area: ",Math.round(h)," sqm"]}),(0,n.jsxs)("h1",{children:["Price:"," ","aed"===r?"".concat(round(d,0)," AED"):"".concat(aedToUsd(d,0)," USD")]}),(0,n.jsxs)("h1",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:["location: ",function(e){let a="";for(let r=e.length-1;r>=0;r--)a+=e[r].name+(r>0?", ":"");return a}(m)]}),(0,n.jsxs)("h1",{children:["purpose: ",p]}),(0,n.jsxs)("h1",{children:["category: ",function(e){let a=e[e.length-1];return a in i?i[a].name:""}(g)]}),(0,n.jsxs)("h1",{children:["beds: ",a.rooms]}),(0,n.jsxs)("h1",{children:["baths: ",a.baths]}),(0,n.jsxs)("h1",{children:["furnishing: ",a.furnishingStatus]}),(0,n.jsxs)("h1",{children:["isVerified: ",a.isVerified.toString()]})]},u)}function XMark(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function ChevronDown(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}let Dropdown=e=>{let{children:a,expanded:r,onClickHandler:t,onBlurCallback:o,className:s,wrapperClasses:i}=e,u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let handler=e=>{u.current&&e.target&&!u.current.contains(e.target)&&o()};return document.addEventListener("mousedown",handler),()=>document.removeEventListener("mousedown",handler)},[]),(0,n.jsxs)("div",{className:"relative"+(r?" z-10":"")+(s?" "+s:""),ref:u,children:[(0,n.jsx)("div",{onClick:t?e=>t(e):()=>{},children:a[0]}),(0,n.jsx)("div",{className:i,hidden:!r,children:a[1]})]})},DropdownChevron=e=>{let{expanded:a,className:r}=e;return(0,n.jsx)("button",{className:(r?r+" ":"")+(a?"rotate-180":"rotate-0"),children:(0,n.jsx)(ChevronDown,{})})};var c=r(8033);function LocationSearch(e){let{locationName:a,onSelected:r}=e,[t,o]=(0,l.useReducer)(reducer,{searchText:"",location:"",isUserInput:!1,showVariants:!1}),[s,i]=(0,l.useState)([]),[u,d]=(0,l.useState)({});return(0,l.useEffect)(()=>{async function fetchData(e){let a=await (0,c.Z)("/location".concat(null!=e?e:"")).then(e=>e.json());a.name&&o({type:"set",payload:a.name})}a&&fetchData(a)},[a]),(0,l.useEffect)(()=>{if(!t.isUserInput)return;let e="/locations/?text=".concat(t.searchText);if(e in u){i(u[e]),o({type:"showVariants",payload:""});return}(0,c.Z)(e).then(e=>{if(404!==e.status)return e.json()}).then(a=>{o({type:"showVariants",payload:""}),i(a),d({...u,[e]:a})})},[t.isUserInput]),(0,n.jsxs)(Dropdown,{expanded:t.showVariants,onBlurCallback:()=>o({type:"blur",payload:""}),wrapperClasses:"absolute top-full left-0 right-0 bg-slate-950",className:"border border-cyan-950 grow shrink",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",value:t.searchText,onChange:e=>{o({type:"input",payload:e.target.value})},placeholder:"Enter location",className:"px-4 py-2  bg-transparent outline-none w-full"}),(0,n.jsx)("button",{className:"absolute top-0 right-0 bottom-0 flex justify-center items-center px-2"+(t.searchText?"":" hidden"),onClick:()=>{o({type:"reset",payload:""}),r({location:void 0})},children:(0,n.jsx)(XMark,{})})]}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("ul",{children:s.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>{o({type:"set",payload:e.name}),i([]),r({location:e.slug})},className:"w-full px-4 py-2 text-left border-b border-cyan-950 whitespace-nowrap text-ellipsis overflow-hidden",children:e.name})},e.id))})})]})}function reducer(e,a){switch(a.type){case"reset":return{searchText:"",location:"",isUserInput:!1,showVariants:!1};case"blur":return{searchText:e.location,location:e.location,isUserInput:!1,showVariants:!1};case"input":return{searchText:a.payload,location:e.location,isUserInput:!0,showVariants:e.showVariants};case"showVariants":return{searchText:e.searchText,location:e.location,isUserInput:!1,showVariants:!0};case"set":return{searchText:a.payload,location:a.payload,isUserInput:!1,showVariants:!1};default:return e}}let d=[{slug:"daily",label:"Daily"},{slug:"weekly",label:"Weekly"},{slug:"monthly",label:"Monthly"},{slug:"yearly",label:"Yearly"}],m=[{slug:"completed",label:"Completed"},{slug:"off-plan",label:"Off-plan"}];function PurposeSelect(e){let{initialValue:a,onSelected:r}=e,[t,o]=(0,l.useState)(""),[s,i]=(0,l.useState)(!1),{rentFrequency:u,completion:c}=a;return(0,l.useEffect)(()=>{a.purpose&&o(a.purpose)},[a.purpose]),(0,n.jsxs)(Dropdown,{expanded:s,onClickHandler:()=>i(e=>!e),onBlurCallback:()=>i(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-60",className:"border border-cyan-950 px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"hover:bg-slate-800 px-2"+("for-rent"===t?" bg-slate-600":""),onClick:e=>{let a="for-rent"===t?"":"for-rent";o(a),r({purpose:a}),e.stopPropagation()},children:"Rent"}),(0,n.jsx)("button",{className:"hover:bg-slate-800 px-2"+("for-sale"===t?" bg-slate-600":""),onClick:e=>{let a="for-sale"===t?"":"for-sale";o(a),r({purpose:a}),e.stopPropagation()},children:"Buy"}),(0,n.jsx)(DropdownChevron,{expanded:s,className:"ml-4"+(""!==t?" block":" invisible")})]}),(0,n.jsxs)(n.Fragment,{children:["for-rent"===t&&(0,n.jsxs)("div",{className:"px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex py-2",children:["Rent frequency:",(0,n.jsx)("button",{onClick:()=>r({purpose:t,rentFrequency:""}),className:"hover:bg-slate-800 ml-auto h-full",children:(0,n.jsx)(XMark,{})},"x")]}),(0,n.jsx)("div",{className:"flex flex-wrap",children:d.map(e=>{let{slug:a,label:l}=e;return(0,n.jsx)("button",{onClick:()=>r({purpose:t,rentFrequency:a}),className:"hover:bg-slate-800 px-4 py-2 border-b-2 w-1/2"+(u===a?" border-slate-400":" border-transparent"),children:l},a)})})]}),"for-sale"===t&&(0,n.jsxs)("div",{className:"px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex py-2",children:["Completion:",(0,n.jsx)("button",{onClick:()=>r({purpose:t,completion:""}),className:"hover:bg-slate-800 ml-auto h-full",children:(0,n.jsx)(XMark,{})},"x")]}),(0,n.jsx)("div",{className:"flex flex-wrap",children:m.map(e=>{let{slug:a,label:l}=e;return(0,n.jsx)("button",{onClick:()=>r({purpose:t,completion:a}),className:"hover:bg-slate-800 px-4 py-2 border-b-2 w-full"+(c===a?" border-slate-400":" border-transparent"),children:l},a)})})]})]})]})}function CategorySelection(e){let{initialValue:a,onSelected:r}=e,[t,o]=(0,l.useState)(a||"residential"),[s,c]=(0,l.useState)("residential"),[d,m]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{a?o(a):o("residential")},[a]),(0,n.jsxs)(Dropdown,{expanded:d,onClickHandler:()=>m(!d),onBlurCallback:()=>m(!1),wrapperClasses:"absolute top-full left-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("span",{className:"cursor-pointer",children:t in i?i[t].name:""}),(0,n.jsx)(DropdownChevron,{expanded:d})]}),(0,n.jsxs)("div",{className:"absolute top-full left-0 bg-slate-950 w-80",hidden:!d,children:[(0,n.jsx)("div",{className:"flex gap-4 px-4 py-2 ",children:u.map(e=>{let{slug:a,name:r}=e;return(0,n.jsx)("button",{className:"block w-2/4 border-b-2 "+"".concat(s===a?" border-slate-400":" border-transparent"),onClick:()=>c(a),children:r},a)})}),u.map(e=>{let{slug:a,subcategories:l}=e;return(0,n.jsx)("div",{hidden:s!==a,children:(0,n.jsx)("div",{className:"flex gap-y-2 px-4 py-2 flex-wrap",children:l.map(e=>{let{slug:a,name:l}=e;return(0,n.jsx)("button",{title:l,className:"w-2/4 px-4 py-2 whitespace-nowrap overflow-hidden overflow-ellipsis border-b-2 hover:bg-slate-800"+"".concat(t===a?" border-slate-400":" border-transparent"),onClick:()=>{o(a),r({category:a}),m(!1)},children:l},a)})})},a)})]})]})}function ChevronLeft(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}function ChevronRigth(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}function DoubleChevronLeft(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})}let p=" px-4 py-2 border border-cyan-950 hover:bg-slate-800";function Paginator(e){var a;let{currentPage:r,pagesNumber:l,onPageSelected:t}=e,o=1;r>l&&(r=l);let s=[r];for(;s.length<5&&s.length<l;)l-r-o>=0&&s.push(r+o),r-o>0&&s.push(r-o),o++;return s=s.sort((e,a)=>e-a),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:(l>1?"flex":"hidden")+" gap-4 justify-center",children:[(0,n.jsx)("button",{className:(r>3?"block":"hidden")+p,onClick:()=>t({page:1}),children:(0,n.jsx)("span",{className:"rotate-90",children:(0,n.jsx)(DoubleChevronLeft,{})})}),(0,n.jsx)("button",{className:(r>1?"block":"hidden")+p,onClick:()=>t({page:r-1||1}),children:(0,n.jsx)("span",{className:"rotate-90",children:(0,n.jsx)(ChevronLeft,{})})}),s.map(e=>(0,n.jsx)("button",{onClick:()=>{e!==r&&t({page:e})},className:(e===r?"bg-slate-600":"")+p,children:e},e)),(0,n.jsx)("button",{className:(r<l?"block":"hidden")+p,onClick:()=>t({page:r<l?r+1:l}),children:(0,n.jsx)("span",{children:(0,n.jsx)(ChevronRigth,{})})})]})})}function RoomsSelection(e){let{initialSelection:a,onSelected:r}=e,t=[{key:"0",name:"Studio"},{key:"1",name:"1"},{key:"2",name:"2"},{key:"3",name:"3"},{key:"4",name:"4"},{key:"5",name:"5"},{key:"6+",name:"6+"}],o=[{key:"1",name:"1"},{key:"2",name:"2"},{key:"3",name:"3"},{key:"4",name:"4"},{key:"5",name:"5"},{key:"6+",name:"6+"}],[s,i]=(0,l.useState)(!1),[u,c]=(0,l.useReducer)(roomsSelection_reducer,{bedrooms:t.reduce((e,r)=>{var n;return{...e,[r.key]:null===(n=a.bedrooms)||void 0===n?void 0:n.includes(r.key)}},{}),bathrooms:o.reduce((e,r)=>{var n;return{...e,[r.key]:null===(n=a.bedrooms)||void 0===n?void 0:n.includes(r.key)}},{}),changedAt:void 0});return(0,l.useEffect)(()=>{u.changedAt&&r({bedrooms:Object.entries(u.bedrooms).filter(e=>{let[a,r]=e;return r}).map(e=>{let[a,r]=e;return a}).join(","),bathrooms:Object.entries(u.bathrooms).filter(e=>{let[a,r]=e;return r}).map(e=>{let[a,r]=e;return a}).join(",")})},[u.changedAt]),(0,n.jsxs)(Dropdown,{expanded:s,onClickHandler:()=>i(e=>!e),onBlurCallback:()=>i(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("span",{className:"cursor-pointer",children:"Rooms"}),(0,n.jsx)(DropdownChevron,{expanded:s})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-4 py-2",children:"Bedrooms:"}),(0,n.jsx)("div",{className:"flex flex-wrap px-4 py-2",children:t.map(e=>(0,n.jsx)(RoomButton,{title:e.name,onClickHandler:()=>{c({type:u.bedrooms[e.key]?"unselect":"select",payload:e.key,roomType:"bedrooms"})},isSelected:u.bedrooms[e.key],children:e.name},e.key))}),(0,n.jsx)("div",{className:"px-4 py-2",children:"Bathrooms:"}),(0,n.jsx)("div",{className:"flex flex-wrap px-4 py-2",children:o.map(e=>(0,n.jsx)(RoomButton,{title:e.name,onClickHandler:()=>{c({type:u.bathrooms[e.key]?"unselect":"select",payload:e.key,roomType:"bathrooms"})},isSelected:u.bathrooms[e.key],children:e.name},e.key))})]})]})}function RoomButton(e){let{title:a,children:r,onClickHandler:l,isSelected:t}=e;return(0,n.jsx)("button",{className:"block px-4 py-2 whitespace-nowrap border-b-2 hover:bg-slate-800"+(t?" border-slate-400":" border-transparent"),title:a,onClick:()=>{l()},children:r})}function roomsSelection_reducer(e,a){switch(a.type){case"select":if(a.payload&&a.roomType){let r={...e};return r[a.roomType][a.payload]=!0,r.changedAt=Date.now(),r}case"unselect":if(a.payload&&a.roomType){let r={...e};return r[a.roomType][a.payload]=!1,r.changedAt=Date.now(),r}}return e}function PriceFilter(e){let{values:a,onChange:r}=e,[t,o]=(0,l.useState)(!1),[s,i]=(0,l.useState)(""),[u,c]=(0,l.useState)(""),[d,m,p]=useCurrency();return(0,l.useEffect)(()=>{p()},[]),(0,l.useEffect)(()=>{"aed"===d&&(i(a.priceForm&&validators_isStringPositiveFloat(a.priceForm)?round(a.priceForm,0):""),c(a.priceTo&&validators_isStringPositiveFloat(a.priceTo)?round(a.priceTo,0):"")),"usd"===d&&(i(a.priceForm&&validators_isStringPositiveFloat(a.priceForm)?aedToUsd(a.priceForm,0):""),c(a.priceTo&&validators_isStringPositiveFloat(a.priceTo)?aedToUsd(a.priceTo,0):""))},[a.priceForm,a.priceTo,d]),(0,n.jsxs)(Dropdown,{expanded:t,onClickHandler:()=>o(e=>!e),onBlurCallback:()=>o(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex gap-4",onLoad:()=>{console.log("loaded")},children:[(0,n.jsx)("span",{className:"cursor-pointer",children:"Price"}),(0,n.jsx)(DropdownChevron,{expanded:t})]}),(0,n.jsxs)("div",{className:"px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("span",{className:"mr-auto",children:"Price:"}),["aed","usd"].map(e=>(0,n.jsx)("button",{className:"border-b-2"+(e===d?" border-slate-400":" border-transparent"),onClick:()=>{e!==d&&m(e)},children:e},e))]}),(0,n.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,n.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"From",value:s,onChange:e=>{validators_isStringPositiveFloat(e.target.value)&&(i(e.target.value),r({priceFrom:"aed"===d?e.target.value:usdToAed(e.target.value)}))}}),(0,n.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"To",value:u,onChange:e=>{validators_isStringPositiveFloat(e.target.value)&&(c(e.target.value),r({priceTo:"aed"===d?e.target.value:usdToAed(e.target.value)}))}})]})]})]})}function AreaFilter(e){let{values:a,onChange:r}=e,[t,o]=(0,l.useState)(!1),[s,i]=(0,l.useState)(""),[u,c]=(0,l.useState)(""),[d,m,p]=function(){let[e,a]=(0,l.useState)(null);return[e,e=>{e&&(localStorage.setItem("areaUnits",e),a(e))},()=>{{let e=localStorage.getItem("areaUnits");e&&["sqm","sqft"].includes(e)?a(e):a("sqm")}}]}();return(0,l.useEffect)(()=>{p()},[]),(0,l.useEffect)(()=>{"sqm"===d?(i(a.areaFrom&&validators_isStringPositiveFloat(a.areaFrom)?round(a.areaFrom,0):""),c(a.areaTo&&validators_isStringPositiveFloat(a.areaTo)?round(a.areaTo,0):"")):(i(a.areaFrom&&validators_isStringPositiveFloat(a.areaFrom)?sqmToSqft(a.areaFrom,0):""),c(a.areaTo&&validators_isStringPositiveFloat(a.areaTo)?sqmToSqft(a.areaTo,0):""))},[a.areaFrom,a.areaTo,d]),(0,n.jsxs)(Dropdown,{expanded:t,onClickHandler:()=>o(e=>!e),onBlurCallback:()=>o(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("span",{className:"cursor-pointer",children:"Area"}),(0,n.jsx)(DropdownChevron,{expanded:t})]}),(0,n.jsxs)("div",{className:"px-4 py-2",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("span",{className:"mr-auto",children:"Area:"}),["sqm","sqft"].map(e=>(0,n.jsx)("button",{className:"border-b-2"+(e===d?" border-slate-400":" border-transparent"),onClick:()=>{e!==d&&m(e)},children:e},e))]}),(0,n.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,n.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"From",value:s,onChange:e=>{validators_isStringPositiveFloat(e.target.value)&&(i(e.target.value),r({areaFrom:"sqm"===d?e.target.value:sqftToSqm(e.target.value)}))}}),(0,n.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"To",value:u,onChange:e=>{validators_isStringPositiveFloat(e.target.value)&&(c(e.target.value),r({areaTo:"sqm"===d?e.target.value:sqftToSqm(e.target.value)}))}})]})]})]})}function BarsDown(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"})})}function BarsUP(){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"})})}let g=[{key:"date",name:"Date",defaultOrder:"desc"},{key:"price",name:"Price",defaultOrder:"asc"},{key:"area",name:"Area",defaultOrder:"asc"}],h=g.reduce((e,a)=>(e[a.key]={key:a.key,name:a.name,defaultOrder:a.defaultOrder},e),{}),x=g.map(e=>e.key);function Sort(e){let{value:a,onChange:r}=e,[t,o]=(0,l.useState)(!1),[s,i]=(0,l.useState)("desc"),[u,c]=(0,l.useState)("");return(0,l.useEffect)(()=>{if(a){var e,r;let n=RegExp("^(?<sortField>\\w+)_(?<sortOrder>(?:desc)|(?:asc))$","i").exec(a);(null==n?void 0:null===(e=n.groups)||void 0===e?void 0:e.sortField)&&(null==n?void 0:null===(r=n.groups)||void 0===r?void 0:r.sortOrder)?x.includes(n.groups.sortField)&&(c(n.groups.sortField),i(n.groups.sortOrder)):(c(g[0].key),i(g[0].defaultOrder))}},[a]),(0,n.jsxs)(Dropdown,{expanded:t,onClickHandler:()=>o(e=>!e),onBlurCallback:()=>o(!1),wrapperClasses:"absolute top-full right-0 left-0 bg-slate-950",className:"border border-cyan-950 px-4 py-2 min-w-[10rem]",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),r({sort:"".concat(u,"_").concat("desc"===s?"asc":"desc")})},children:"desc"===s?(0,n.jsx)(BarsDown,{}):(0,n.jsx)(BarsUP,{})}),(0,n.jsx)("span",{className:"cursor-pointer",children:u?h[u].name:"Sort by"}),(0,n.jsx)(DropdownChevron,{expanded:t})]}),(0,n.jsx)("div",{className:"px-4 py-2 flex flex-col gap-2",children:x.map(e=>(0,n.jsx)("button",{className:"block px-4 py-2 w-full border-b-2 hover:bg-slate-800"+"".concat(u===e?" border-slate-400":" border-transparent"),onClick:()=>{u!==e?r({sort:"".concat(e,"_").concat(h[e].defaultOrder)}):r({sort:"".concat(e,"_").concat("desc"===s?"asc":"desc")})},children:h[e].name},e))})]})}function Page(){var e,a,r;let[o,s]=(0,l.useState)(1),[i,u]=(0,l.useState)([]),d=(0,t.useRouter)(),m=(0,t.usePathname)(),p=new URLSearchParams((0,t.useSearchParams)()),g=p.toString();p.get("location");let h="/properties".concat(g?"?"+g:"");function updateRoute(e){if(e){for(let a of("location"in e&&(e.location?p.set("location",e.location):p.delete("location")),["purpose","bedrooms","bathrooms"]))a in e&&(""===e[a]?p.delete(a):p.set(a,e[a]));for(let[a,r]of(e.purpose&&(""!==e.purpose?(e.rentFrequency?p.set("rent_frequency",e.rentFrequency):p.delete("rent_frequency"),e.completion?p.set("completion",e.completion):p.delete("completion")):(p.delete("purpose"),p.delete("rent_frequency"),p.delete("completion"))),[["priceFrom","price_from"],["priceTo","price_to"],["areaFrom","area_from"],["areaTo","area_to"]]))a in e&&(""===e[a]?p.delete(r):p.set(r,e[a]));e.category&&p.set("category",e.category),e.page&&e.page>1?p.set("page",e.page.toString()):p.delete("page"),e.sort&&RegExp("^(?<sortField>\\w+)_(?<sortOrder>(?:desc)|(?:asc))$","i").test(e.sort)&&p.set("sort",e.sort)}let a=p.toString();d.push(m+"".concat(a?"?".concat(a):""))}return(0,l.useEffect)(()=>{(async function(e){let a=await (0,c.Z)(e).then(e=>e.json());u(a.properties),s(a.pages)})(h)},[h]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-2xl text-center",children:"Properties"}),(0,n.jsxs)("div",{className:"sticky top-0 z-10 bg-black border-b border-cyan-950",children:[(0,n.jsxs)("div",{className:"flex gap-4 pt-2 z-10 flex-wrap",children:[(0,n.jsx)(LocationSearch,{locationName:p.get("location"),onSelected:updateRoute}),(0,n.jsx)(PurposeSelect,{initialValue:{purpose:p.get("purpose"),rentFrequency:p.get("rent_frequency"),completion:p.get("completion")},onSelected:updateRoute}),(0,n.jsx)(CategorySelection,{initialValue:p.get("category"),onSelected:updateRoute}),(0,n.jsx)(RoomsSelection,{initialSelection:{bedrooms:p.get("bedrooms"),bathrooms:p.get("bathrooms")},onSelected:updateRoute}),(0,n.jsx)(PriceFilter,{values:{priceForm:p.get("price_from"),priceTo:p.get("price_to")},onChange:updateRoute}),(0,n.jsx)(AreaFilter,{values:{areaFrom:p.get("area_from"),areaTo:p.get("area_to")},onChange:updateRoute})]}),(0,n.jsx)("div",{className:"flex justify-end py-2",children:(0,n.jsx)(Sort,{value:p.get("sort"),onChange:updateRoute})})]}),(0,n.jsx)("div",{className:"flex flex-col gap-2",children:i.map(e=>(0,n.jsx)(PropertyCard,{property:e},e.id))}),(0,n.jsx)("div",{className:"py-4 sticky bottom-0 bg-black border-t border-cyan-950"+(o>1?"":" hidden"),children:(0,n.jsx)(Paginator,{pagesNumber:o,currentPage:null!==(e="string"==typeof(a=p.get("page"))&&"string"==typeof(r=a)&&/^([1-9]\d*)$/.test(r)?Number(a):null)&&void 0!==e?e:1,onPageSelected:updateRoute})})]})}}},function(e){e.O(0,[569,971,864,744],function(){return e(e.s=4645)}),_N_E=e.O()}]);