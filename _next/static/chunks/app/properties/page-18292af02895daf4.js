(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{4645:function(e,a,r){Promise.resolve().then(r.bind(r,4350))},9413:function(e,a){"use strict";let r="https://api.refty.ai";a.Z=(e,a)=>void 0===a?fetch(r+e,a):fetch(r+e)},4350:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return W}});var l=r(3827),n=r(4090),t=r(7907),s=r(8792);let o=[null,{id:1,level:0,externalID:1,name:"Residential",name_l1:"سكني",name_l2:"居住物业",name_l3:"Жилые",slug:"residential",nameSingular:"Residential",nameSingular_l1:"سكني",nameSingular_l2:"居住物业",nameSingular_l3:"Жилые"},{id:2,level:1,externalID:4,name:"Apartments",name_l1:"شقق",name_l2:"公寓",name_l3:"Апартаменты",slug:"apartments",nameSingular:"Apartment",nameSingular_l1:"شقة",nameSingular_l2:"公寓",nameSingular_l3:"Квартира"},{id:3,level:0,externalID:2,name:"Commercial",name_l1:"تجاري",name_l2:"商用物业",name_l3:"Коммерческие",slug:"commercial",nameSingular:"Commercial",nameSingular_l1:"تجاري",nameSingular_l2:"商用物业",nameSingular_l3:"Коммерческий"},{id:4,level:1,externalID:5,name:"Offices",name_l1:"مکاتب",name_l2:"写字楼",name_l3:"Офисы",slug:"offices",nameSingular:"Office",nameSingular_l1:"مکتب",nameSingular_l2:"写字楼",nameSingular_l3:"Офис"},{id:5,level:1,externalID:3,name:"Villas",name_l1:"فلل",name_l2:"别墅",name_l3:"Виллы",slug:"villas",nameSingular:"Villa",nameSingular_l1:"فیلا",nameSingular_l2:"别墅",nameSingular_l3:"Вилла"},{id:6,level:1,externalID:9,name:"Labour Camps",name_l1:"مساكن عمال",name_l2:"员工宿舍",name_l3:"Трудовые лагеря",slug:"labour-camps",nameSingular:"Labour Camp",nameSingular_l1:"سكن عمال",nameSingular_l2:"员工宿舍",nameSingular_l3:"Трудовой лагерь"},{id:7,level:1,externalID:7,name:"Warehouses",name_l1:"مستودعات",name_l2:"仓库",name_l3:"Складские помещения",slug:"warehouses",nameSingular:"Warehouse",nameSingular_l1:"مستودع",nameSingular_l2:"仓库",nameSingular_l3:"Склад"},{id:8,level:1,externalID:16,name:"Townhouses",name_l1:"تاون هاوس",name_l2:"联排别墅",name_l3:"Таунхаусы",slug:"townhouses",nameSingular:"Townhouse",nameSingular_l1:"تاون هاوس",nameSingular_l2:"联排别墅",nameSingular_l3:"Таунхаус"},{id:9,level:1,externalID:21,name:"Hotel Apartments",name_l1:"شقق فندقية",name_l2:"酒店式公寓",name_l3:"Апартаменты в отеле",slug:"hotel-apartments",nameSingular:"Hotel Apartment",nameSingular_l1:"شقة فندقية",nameSingular_l2:"酒店式公寓",nameSingular_l3:"Апартаменты в отеле"},{id:10,level:1,externalID:17,name:"Buildings",name_l1:"مباني سكنية",name_l2:"住宅楼",name_l3:"Здания",slug:"residential-building",nameSingular:"Building",nameSingular_l1:"مبنى سكني",nameSingular_l2:"住宅楼",nameSingular_l3:"Здание"},{id:11,level:1,externalID:14,name:"Plots",name_l1:"اراضي سكنية",name_l2:"住宅地块",name_l3:"Участки",slug:"residential-plots",nameSingular:"Plot",nameSingular_l1:"ارض سكنية",nameSingular_l2:"住宅地块",nameSingular_l3:"Участок"},{id:12,level:1,externalID:19,name:"Villa Compounds",name_l1:"فلل مجمعات سكنية",name_l2:"别墅区",name_l3:"Комплексы вилл",slug:"villa-compound",nameSingular:"Villa Compound",nameSingular_l1:"فيلا مجمع سكني",nameSingular_l2:"别墅区",nameSingular_l3:"Комплекс вилл"},{id:13,level:1,externalID:6,name:"Shops",name_l1:"محلات تجارية",name_l2:"商铺",name_l3:"Магазины",slug:"shops",nameSingular:"Shop",nameSingular_l1:"محل تجاري",nameSingular_l2:"商铺",nameSingular_l3:"Магазин"},{id:14,level:1,externalID:23,name:"Mixed Use Land",name_l1:"ارض استخدام متعدد",name_l2:"混合用途用地",name_l3:"Земли смешанного использования",slug:"mixed-use-land",nameSingular:"Mixed Use Land",nameSingular_l1:"ارض استخدام متعدد",nameSingular_l2:"混合用途用地",nameSingular_l3:"Земля смешанного использования"},{id:15,level:1,externalID:15,name:"Plots",name_l1:"اراضي تجارية",name_l2:"商业地块",name_l3:"Участки",slug:"commercial-plots",nameSingular:"Plot",nameSingular_l1:"ارض تجارية",nameSingular_l2:"商业地块",nameSingular_l3:"Участок"},{id:16,level:1,externalID:18,name:"Penthouses",name_l1:"بنتهاوس",name_l2:"顶楼公寓",name_l3:"Пентхаусы",slug:"penthouse",nameSingular:"Penthouse",nameSingular_l1:"بنتهاوس",nameSingular_l2:"顶楼公寓",nameSingular_l3:"Пентхаус"},{id:17,level:1,externalID:25,name:"Villas",name_l1:"فلل تجارية",name_l2:"商业别墅",name_l3:"Виллы",slug:"commercial-villas",nameSingular:"Villa",nameSingular_l1:"فيلا تجارية",nameSingular_l2:"商业别墅",nameSingular_l3:"Вилла"},{id:18,level:1,externalID:13,name:"Floors",name_l1:"طوابق تجارية",name_l2:"商业楼层",name_l3:"Этажи",slug:"commercial-floors",nameSingular:"Floor",nameSingular_l1:"طابق تجاري",nameSingular_l2:"商业楼层",nameSingular_l3:"Этаж"},{id:19,level:1,externalID:20,name:"Bulk Units",name_l1:"مجمعات سكنية",name_l2:"大型综合物业",name_l3:"Массовые единицы",slug:"bulk-units",nameSingular:"Bulk Unit",nameSingular_l1:"مجمع سكني",nameSingular_l2:"大型综合物业",nameSingular_l3:"Массовая единица"},{id:20,level:1,externalID:12,name:"Floors",name_l1:"طوابق سكنية",name_l2:"住宅楼层",name_l3:"Этажи",slug:"residential-floors",nameSingular:"Floor",nameSingular_l1:"طابق سكني",nameSingular_l2:"住宅楼层",nameSingular_l3:"Этаж"},{id:21,level:1,externalID:10,name:"Buildings",name_l1:"مباني تجارية",name_l2:"商业大厦",name_l3:"Здания",slug:"commercial-buildings",nameSingular:"Building",nameSingular_l1:"مبنی تجاري",nameSingular_l2:"商业大厦",nameSingular_l3:"Здание"},{id:22,level:1,externalID:8,name:"Factories",name_l1:"مصانع",name_l2:"工厂",name_l3:"Фабрики",slug:"factories",nameSingular:"Factory",nameSingular_l1:"مصنع",nameSingular_l2:"工厂",nameSingular_l3:"Фабрика"},{id:23,level:1,externalID:24,name:"Showrooms",name_l1:"معارض تجارية",name_l2:"展览店面",name_l3:"Выставочные залы",slug:"showrooms",nameSingular:"Showroom",nameSingular_l1:"معرض تجاري",nameSingular_l2:"展览店面",nameSingular_l3:"Выставочный зал"},{id:24,level:1,externalID:22,name:"Industrial Land",name_l1:"ارض صناعية",name_l2:"工业用地",name_l3:"Земли промышленного назначения",slug:"industrial-land",nameSingular:"Industrial Land",nameSingular_l1:"ارض صناعية",nameSingular_l2:"工业用地",nameSingular_l3:"Земля промышленного назначения"},{id:25,level:1,externalID:11,name:"Other Commercial",name_l1:"عقارات تجارية أخرى",name_l2:"其他商用物业",name_l3:"Другие коммерческие",slug:"commerical-properties",nameSingular:"Other Commercial",nameSingular_l1:"Other Commercial",nameSingular_l2:"其他商用物业",nameSingular_l3:"Другое коммерческое"}].reduce((e,a)=>(a&&(e[a.id]=a,e[a.slug]=a),e),{}),i=[{key:"residential",subcategories:[{key:"apartments"},{key:"townhouses"},{key:"villas"},{key:"villa-compound"},{key:"residential-plots"},{key:"residential-building"},{key:"penthouse"},{key:"hotel-apartments"},{key:"residential-floors"}]},{key:"commercial",subcategories:[{key:"offices"},{key:"shops"},{key:"warehouses"},{key:"showrooms"},{key:"labour-camps"},{key:"mixed-use-land"},{key:"bulk-units"},{key:"factories"},{key:"industrial-land"},{key:"commercial-plots"},{key:"commercial-villas"},{key:"commercial-floors"},{key:"commercial-buildings"},{key:"commerical-properties"}]}].map(e=>{if(!(e.key in o))throw Error();let a={...o[e.key],subcategories:[]};return a.subcategories=e.subcategories.map(e=>{if(!(e.key in o))throw Error();return o[e.key]}),a});function c(){let[e,a]=(0,n.useState)("aed");return[e,e=>{e&&(localStorage.setItem("currency",e),a(e))},()=>{{let e=localStorage.getItem("currency");e&&["usd","aed"].includes(e)?a(e):a("aed")}}]}function u(e){return"string"==typeof e&&/^(([1-9]\d*$)|(((0|[1-9]\d*)\.\d+))?)$/.test(e)}function m(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(h(10.7639*Number(e),a)):h(10.7639*Number(e),a);throw Error("roundAcuracity must be greater than 0")}function d(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(h(Number(e)/10.7639,a)):h(Number(e)/10.7639,a);throw Error("roundAcuracity must be greater than 0")}function p(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(h(3.75*Number(e),a)):h(3.75*Number(e),a);throw Error("roundAcuracity must be greater than 0")}function g(e,a){if(void 0===a||a>=0)return"string"==typeof e?String(h(Number(e)/3.75,a)):h(Number(e)/3.75,a);throw Error("roundAcuracity must be greater than 0")}function h(e,a){if("number"==typeof e){if(void 0===a)return e;if(0===a)return Math.round(e);if(a>0)return Math.round(e*10**a)/10**a}if("string"==typeof e){if(void 0===a)return String(Number(e));if(0===a)return String(Math.round(Number(e)));if(a>0)return String(Math.round(Number(e)*10**a)/10**a)}throw Error("roundAcuracity must be greater than 0")}function x(e){let{property:a}=e,[r,t,i]=c();(0,n.useEffect)(()=>{i()},[r]);let{id:u,title:m,price:d,locationHierarchy:p,purpose:x,categories:f,area:b}=a;return(0,l.jsxs)(s.default,{href:"/property?id=".concat(u),className:"p-5 border border-cyan-950",children:[(0,l.jsx)("h1",{children:m}),(0,l.jsxs)("h1",{children:["Area: ",Math.round(b)," sqm"]}),(0,l.jsxs)("h1",{children:["Price:"," ","aed"===r?"".concat(h(d,0)," AED"):"".concat(g(d,0)," USD")]}),(0,l.jsxs)("h1",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:["location: ",function(e){let a="";for(let r=e.length-1;r>=0;r--)a+=e[r].name+(r>0?", ":"");return a}(p)]}),(0,l.jsxs)("h1",{children:["purpose: ",x]}),(0,l.jsxs)("h1",{children:["category: ",function(e){let a=e[e.length-1];return a in o?o[a].name:""}(f)]}),(0,l.jsxs)("h1",{children:["beds: ",a.rooms]}),(0,l.jsxs)("h1",{children:["baths: ",a.baths]}),(0,l.jsxs)("h1",{children:["furnishing: ",a.furnishingStatus]}),(0,l.jsxs)("h1",{children:["isVerified: ",a.isVerified.toString()]})]},u)}function f(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function b(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}let y=e=>{let{children:a,expanded:r,onClickHandler:t,onBlurCallback:s,className:o,wrapperClasses:i}=e,c=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=e=>{c.current&&e.target&&!c.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.jsxs)("div",{className:"relative"+(r?" z-10":"")+(o?" "+o:""),ref:c,children:[(0,l.jsx)("div",{onClick:t?e=>t(e):()=>{},children:a[0]}),(0,l.jsx)("div",{className:i,hidden:!r,children:a[1]})]})},_=e=>{let{expanded:a,className:r}=e;return(0,l.jsx)("button",{className:(r?r+" ":"")+(a?"rotate-180":"rotate-0"),children:(0,l.jsx)(b,{})})};var v=r(9413);function j(e){let{locationName:a,onSelected:r}=e,[t,s]=(0,n.useReducer)(S,{searchText:"",location:"",isUserInput:!1,showVariants:!1}),[o,i]=(0,n.useState)([]),[c,u]=(0,n.useState)({});return(0,n.useEffect)(()=>{async function e(e){let a=await (0,v.Z)("/location".concat(null!=e?e:"")).then(e=>e.json());a.name&&s({type:"set",payload:a.name})}a&&e(a)},[a]),(0,n.useEffect)(()=>{if(!t.isUserInput)return;let e="/locations/?text=".concat(t.searchText);if(e in c){i(c[e]),s({type:"showVariants",payload:""});return}(0,v.Z)(e).then(e=>{if(404!==e.status)return e.json()}).then(a=>{s({type:"showVariants",payload:""}),i(a),u({...c,[e]:a})})},[t.isUserInput]),(0,l.jsxs)(y,{expanded:t.showVariants,onBlurCallback:()=>s({type:"blur",payload:""}),wrapperClasses:"absolute top-full left-0 right-0 bg-slate-950",className:"border border-cyan-950 grow shrink",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",value:t.searchText,onChange:e=>{s({type:"input",payload:e.target.value})},placeholder:"Enter location",className:"px-4 py-2  bg-transparent outline-none w-full"}),(0,l.jsx)("button",{className:"absolute top-0 right-0 bottom-0 flex justify-center items-center px-2"+(t.searchText?"":" hidden"),onClick:()=>{s({type:"reset",payload:""}),r({location:void 0})},children:(0,l.jsx)(f,{})})]}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("ul",{children:o.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)("button",{onClick:()=>{s({type:"set",payload:e.name}),i([]),r({location:e.slug})},className:"w-full px-4 py-2 text-left border-b border-cyan-950 whitespace-nowrap text-ellipsis overflow-hidden",children:e.name})},e.id))})})]})}function S(e,a){switch(a.type){case"reset":return{searchText:"",location:"",isUserInput:!1,showVariants:!1};case"blur":return{searchText:e.location,location:e.location,isUserInput:!1,showVariants:!1};case"input":return{searchText:a.payload,location:e.location,isUserInput:!0,showVariants:e.showVariants};case"showVariants":return{searchText:e.searchText,location:e.location,isUserInput:!1,showVariants:!0};case"set":return{searchText:a.payload,location:a.payload,isUserInput:!1,showVariants:!1};default:return e}}let k=[{slug:"daily",label:"Daily"},{slug:"weekly",label:"Weekly"},{slug:"monthly",label:"Monthly"},{slug:"yearly",label:"Yearly"}],w=[{slug:"completed",label:"Completed"},{slug:"off-plan",label:"Off-plan"}];function N(e){let{initialValue:a,onSelected:r}=e,[t,s]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1),{rentFrequency:c,completion:u}=a;return(0,n.useEffect)(()=>{a.purpose&&s(a.purpose)},[a.purpose]),(0,l.jsxs)(y,{expanded:o,onClickHandler:()=>i(e=>!e),onBlurCallback:()=>i(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-60",className:"border border-cyan-950 px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("button",{className:"hover:bg-slate-800 px-2"+("for-rent"===t?" bg-slate-600":""),onClick:e=>{let a="for-rent"===t?"":"for-rent";s(a),r({purpose:a}),e.stopPropagation()},children:"Rent"}),(0,l.jsx)("button",{className:"hover:bg-slate-800 px-2"+("for-sale"===t?" bg-slate-600":""),onClick:e=>{let a="for-sale"===t?"":"for-sale";s(a),r({purpose:a}),e.stopPropagation()},children:"Buy"}),(0,l.jsx)(_,{expanded:o,className:"ml-4"+(""!==t?" block":" invisible")})]}),(0,l.jsxs)(l.Fragment,{children:["for-rent"===t&&(0,l.jsxs)("div",{className:"px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex py-2",children:["Rent frequency:",(0,l.jsx)("button",{onClick:()=>r({purpose:t,rentFrequency:""}),className:"hover:bg-slate-800 ml-auto h-full",children:(0,l.jsx)(f,{})},"x")]}),(0,l.jsx)("div",{className:"flex flex-wrap",children:k.map(e=>{let{slug:a,label:n}=e;return(0,l.jsx)("button",{onClick:()=>r({purpose:t,rentFrequency:a}),className:"hover:bg-slate-800 px-4 py-2 border-b-2 w-1/2"+(c===a?" border-slate-400":" border-transparent"),children:n},a)})})]}),"for-sale"===t&&(0,l.jsxs)("div",{className:"px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex py-2",children:["Completion:",(0,l.jsx)("button",{onClick:()=>r({purpose:t,completion:""}),className:"hover:bg-slate-800 ml-auto h-full",children:(0,l.jsx)(f,{})},"x")]}),(0,l.jsx)("div",{className:"flex flex-wrap",children:w.map(e=>{let{slug:a,label:n}=e;return(0,l.jsx)("button",{onClick:()=>r({purpose:t,completion:a}),className:"hover:bg-slate-800 px-4 py-2 border-b-2 w-full"+(u===a?" border-slate-400":" border-transparent"),children:n},a)})})]})]})]})}function C(e){let{initialValue:a,onSelected:r}=e,[t,s]=(0,n.useState)(a||"residential"),[c,u]=(0,n.useState)("residential"),[m,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{a?s(a):s("residential")},[a]),(0,l.jsxs)(y,{expanded:m,onClickHandler:()=>d(!m),onBlurCallback:()=>d(!1),wrapperClasses:"absolute top-full left-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("span",{className:"cursor-pointer",children:t in o?o[t].name:""}),(0,l.jsx)(_,{expanded:m})]}),(0,l.jsxs)("div",{className:"absolute top-full left-0 bg-slate-950 w-80",hidden:!m,children:[(0,l.jsx)("div",{className:"flex gap-4 px-4 py-2 ",children:i.map(e=>{let{slug:a,name:r}=e;return(0,l.jsx)("button",{className:"block w-2/4 border-b-2 "+"".concat(c===a?" border-slate-400":" border-transparent"),onClick:()=>u(a),children:r},a)})}),i.map(e=>{let{slug:a,subcategories:n}=e;return(0,l.jsx)("div",{hidden:c!==a,children:(0,l.jsx)("div",{className:"flex gap-y-2 px-4 py-2 flex-wrap",children:n.map(e=>{let{slug:a,name:n}=e;return(0,l.jsx)("button",{title:n,className:"w-2/4 px-4 py-2 whitespace-nowrap overflow-hidden overflow-ellipsis border-b-2 hover:bg-slate-800"+"".concat(t===a?" border-slate-400":" border-transparent"),onClick:()=>{s(a),r({category:a}),d(!1)},children:n},a)})})},a)})]})]})}function F(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}function T(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}function I(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})})}let D=" px-4 py-2 border border-cyan-950 hover:bg-slate-800";function L(e){var a;let{currentPage:r,pagesNumber:n,onPageSelected:t}=e,s=1;r>n&&(r=n);let o=[r];for(;o.length<5&&o.length<n;)n-r-s>=0&&o.push(r+s),r-s>0&&o.push(r-s),s++;return o=o.sort((e,a)=>e-a),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:(n>1?"flex":"hidden")+" gap-4 justify-center",children:[(0,l.jsx)("button",{className:(r>3?"block":"hidden")+D,onClick:()=>t({page:1}),children:(0,l.jsx)("span",{className:"rotate-90",children:(0,l.jsx)(I,{})})}),(0,l.jsx)("button",{className:(r>1?"block":"hidden")+D,onClick:()=>t({page:r-1||1}),children:(0,l.jsx)("span",{className:"rotate-90",children:(0,l.jsx)(F,{})})}),o.map(e=>(0,l.jsx)("button",{onClick:()=>{e!==r&&t({page:e})},className:(e===r?"bg-slate-600":"")+D,children:e},e)),(0,l.jsx)("button",{className:(r<n?"block":"hidden")+D,onClick:()=>t({page:r<n?r+1:n}),children:(0,l.jsx)("span",{children:(0,l.jsx)(T,{})})})]})})}function E(e){let{initialSelection:a,onSelected:r}=e,t=[{key:"0",name:"Studio"},{key:"1",name:"1"},{key:"2",name:"2"},{key:"3",name:"3"},{key:"4",name:"4"},{key:"5",name:"5"},{key:"6+",name:"6+"}],s=[{key:"1",name:"1"},{key:"2",name:"2"},{key:"3",name:"3"},{key:"4",name:"4"},{key:"5",name:"5"},{key:"6+",name:"6+"}],[o,i]=(0,n.useState)(!1),[c,u]=(0,n.useReducer)(M,{bedrooms:t.reduce((e,r)=>{var l;return{...e,[r.key]:null===(l=a.bedrooms)||void 0===l?void 0:l.includes(r.key)}},{}),bathrooms:s.reduce((e,r)=>{var l;return{...e,[r.key]:null===(l=a.bedrooms)||void 0===l?void 0:l.includes(r.key)}},{}),changedAt:void 0});return(0,n.useEffect)(()=>{c.changedAt&&r({bedrooms:Object.entries(c.bedrooms).filter(e=>{let[a,r]=e;return r}).map(e=>{let[a,r]=e;return a}).join(","),bathrooms:Object.entries(c.bathrooms).filter(e=>{let[a,r]=e;return r}).map(e=>{let[a,r]=e;return a}).join(",")})},[c.changedAt]),(0,l.jsxs)(y,{expanded:o,onClickHandler:()=>i(e=>!e),onBlurCallback:()=>i(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("span",{className:"cursor-pointer",children:"Rooms"}),(0,l.jsx)(_,{expanded:o})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"px-4 py-2",children:"Bedrooms:"}),(0,l.jsx)("div",{className:"flex flex-wrap px-4 py-2",children:t.map(e=>(0,l.jsx)(B,{title:e.name,onClickHandler:()=>{u({type:c.bedrooms[e.key]?"unselect":"select",payload:e.key,roomType:"bedrooms"})},isSelected:c.bedrooms[e.key],children:e.name},e.key))}),(0,l.jsx)("div",{className:"px-4 py-2",children:"Bathrooms:"}),(0,l.jsx)("div",{className:"flex flex-wrap px-4 py-2",children:s.map(e=>(0,l.jsx)(B,{title:e.name,onClickHandler:()=>{u({type:c.bathrooms[e.key]?"unselect":"select",payload:e.key,roomType:"bathrooms"})},isSelected:c.bathrooms[e.key],children:e.name},e.key))})]})]})}function B(e){let{title:a,children:r,onClickHandler:n,isSelected:t}=e;return(0,l.jsx)("button",{className:"block px-4 py-2 whitespace-nowrap border-b-2 hover:bg-slate-800"+(t?" border-slate-400":" border-transparent"),title:a,onClick:()=>{n()},children:r})}function M(e,a){switch(a.type){case"select":if(a.payload&&a.roomType){let r={...e};return r[a.roomType][a.payload]=!0,r.changedAt=Date.now(),r}case"unselect":if(a.payload&&a.roomType){let r={...e};return r[a.roomType][a.payload]=!1,r.changedAt=Date.now(),r}}return e}function O(e){let{values:a,onChange:r}=e,[t,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)(""),[m,d]=(0,n.useState)(""),[x,f,b]=c();return(0,n.useEffect)(()=>{b()},[]),(0,n.useEffect)(()=>{"aed"===x&&(i(a.priceForm&&u(a.priceForm)?h(a.priceForm,0):""),d(a.priceTo&&u(a.priceTo)?h(a.priceTo,0):"")),"usd"===x&&(i(a.priceForm&&u(a.priceForm)?g(a.priceForm,0):""),d(a.priceTo&&u(a.priceTo)?g(a.priceTo,0):""))},[a.priceForm,a.priceTo,x]),(0,l.jsxs)(y,{expanded:t,onClickHandler:()=>s(e=>!e),onBlurCallback:()=>s(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex gap-4",onLoad:()=>{console.log("loaded")},children:[(0,l.jsx)("span",{className:"cursor-pointer",children:"Price"}),(0,l.jsx)(_,{expanded:t})]}),(0,l.jsxs)("div",{className:"px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"mr-auto",children:"Price:"}),["aed","usd"].map(e=>(0,l.jsx)("button",{className:"border-b-2"+(e===x?" border-slate-400":" border-transparent"),onClick:()=>{e!==x&&f(e)},children:e},e))]}),(0,l.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,l.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"From",value:o,onChange:e=>{u(e.target.value)&&(i(e.target.value),r({priceFrom:"aed"===x?e.target.value:p(e.target.value)}))}}),(0,l.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"To",value:m,onChange:e=>{u(e.target.value)&&(d(e.target.value),r({priceTo:"aed"===x?e.target.value:p(e.target.value)}))}})]})]})]})}function V(e){let{values:a,onChange:r}=e,[t,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)(""),[c,p]=(0,n.useState)(""),[g,x,f]=function(){let[e,a]=(0,n.useState)(null);return[e,e=>{e&&(localStorage.setItem("areaUnits",e),a(e))},()=>{{let e=localStorage.getItem("areaUnits");e&&["sqm","sqft"].includes(e)?a(e):a("sqm")}}]}();return(0,n.useEffect)(()=>{f()},[]),(0,n.useEffect)(()=>{"sqm"===g?(i(a.areaFrom&&u(a.areaFrom)?h(a.areaFrom,0):""),p(a.areaTo&&u(a.areaTo)?h(a.areaTo,0):"")):(i(a.areaFrom&&u(a.areaFrom)?m(a.areaFrom,0):""),p(a.areaTo&&u(a.areaTo)?m(a.areaTo,0):""))},[a.areaFrom,a.areaTo,g]),(0,l.jsxs)(y,{expanded:t,onClickHandler:()=>s(e=>!e),onBlurCallback:()=>s(!1),wrapperClasses:"absolute top-full right-0 bg-slate-950 w-80",className:"border border-cyan-950 px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("span",{className:"cursor-pointer",children:"Area"}),(0,l.jsx)(_,{expanded:t})]}),(0,l.jsxs)("div",{className:"px-4 py-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"mr-auto",children:"Area:"}),["sqm","sqft"].map(e=>(0,l.jsx)("button",{className:"border-b-2"+(e===g?" border-slate-400":" border-transparent"),onClick:()=>{e!==g&&x(e)},children:e},e))]}),(0,l.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,l.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"From",value:o,onChange:e=>{u(e.target.value)&&(i(e.target.value),r({areaFrom:"sqm"===g?e.target.value:d(e.target.value)}))}}),(0,l.jsx)("input",{type:"text",className:"px-4 py-2 block bg-slate-900 outline-none min-w-0 border-b-2 border-transparent focus:border-slate-400",placeholder:"To",value:c,onChange:e=>{u(e.target.value)&&(p(e.target.value),r({areaTo:"sqm"===g?e.target.value:d(e.target.value)}))}})]})]})]})}function P(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"})})}function q(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"})})}let A=[{key:"date",name:"Date",defaultOrder:"desc"},{key:"price",name:"Price",defaultOrder:"asc"},{key:"area",name:"Area",defaultOrder:"asc"}],U=A.reduce((e,a)=>(e[a.key]={key:a.key,name:a.name,defaultOrder:a.defaultOrder},e),{}),R=A.map(e=>e.key);function H(e){let{value:a,onChange:r}=e,[t,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)("desc"),[c,u]=(0,n.useState)("");return(0,n.useEffect)(()=>{if(a){var e,r;let l=RegExp("^(?<sortField>\\w+)_(?<sortOrder>(?:desc)|(?:asc))$","i").exec(a);(null==l?void 0:null===(e=l.groups)||void 0===e?void 0:e.sortField)&&(null==l?void 0:null===(r=l.groups)||void 0===r?void 0:r.sortOrder)?R.includes(l.groups.sortField)&&(u(l.groups.sortField),i(l.groups.sortOrder)):(u(A[0].key),i(A[0].defaultOrder))}},[a]),(0,l.jsxs)(y,{expanded:t,onClickHandler:()=>s(e=>!e),onBlurCallback:()=>s(!1),wrapperClasses:"absolute top-full right-0 left-0 bg-slate-950",className:"border border-cyan-950 px-4 py-2 min-w-[10rem]",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),r({sort:"".concat(c,"_").concat("desc"===o?"asc":"desc")})},children:"desc"===o?(0,l.jsx)(P,{}):(0,l.jsx)(q,{})}),(0,l.jsx)("span",{className:"cursor-pointer",children:c?U[c].name:"Sort by"}),(0,l.jsx)(_,{expanded:t})]}),(0,l.jsx)("div",{className:"px-4 py-2 flex flex-col gap-2",children:R.map(e=>(0,l.jsx)("button",{className:"block px-4 py-2 w-full border-b-2 hover:bg-slate-800"+"".concat(c===e?" border-slate-400":" border-transparent"),onClick:()=>{c!==e?r({sort:"".concat(e,"_").concat(U[e].defaultOrder)}):r({sort:"".concat(e,"_").concat("desc"===o?"asc":"desc")})},children:U[e].name},e))})]})}function W(){var e,a,r;let[s,o]=(0,n.useState)(1),[i,c]=(0,n.useState)([]),u=(0,t.useRouter)(),m=(0,t.usePathname)(),d=new URLSearchParams((0,t.useSearchParams)()),p=d.toString();d.get("location");let g="/properties".concat(p?"?"+p:"");function h(e){if(e){for(let a of("location"in e&&(e.location?d.set("location",e.location):d.delete("location")),["purpose","bedrooms","bathrooms"]))a in e&&(""===e[a]?d.delete(a):d.set(a,e[a]));for(let[a,r]of(e.purpose&&(""!==e.purpose?(e.rentFrequency?d.set("rent_frequency",e.rentFrequency):d.delete("rent_frequency"),e.completion?d.set("completion",e.completion):d.delete("completion")):(d.delete("purpose"),d.delete("rent_frequency"),d.delete("completion"))),[["priceFrom","price_from"],["priceTo","price_to"],["areaFrom","area_from"],["areaTo","area_to"]]))a in e&&(""===e[a]?d.delete(r):d.set(r,e[a]));e.category&&d.set("category",e.category),e.page&&e.page>1?d.set("page",e.page.toString()):d.delete("page"),e.sort&&RegExp("^(?<sortField>\\w+)_(?<sortOrder>(?:desc)|(?:asc))$","i").test(e.sort)&&d.set("sort",e.sort)}let a=d.toString();u.push(m+"".concat(a?"?".concat(a):""))}return(0,n.useEffect)(()=>{(async function(e){let a=await (0,v.Z)(e).then(e=>e.json());c(a.properties),o(a.pages)})(g)},[g]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-2xl text-center",children:"Properties"}),(0,l.jsxs)("div",{className:"sticky top-0 z-10 bg-black border-b border-cyan-950",children:[(0,l.jsxs)("div",{className:"flex gap-4 pt-2 z-10 flex-wrap",children:[(0,l.jsx)(j,{locationName:d.get("location"),onSelected:h}),(0,l.jsx)(N,{initialValue:{purpose:d.get("purpose"),rentFrequency:d.get("rent_frequency"),completion:d.get("completion")},onSelected:h}),(0,l.jsx)(C,{initialValue:d.get("category"),onSelected:h}),(0,l.jsx)(E,{initialSelection:{bedrooms:d.get("bedrooms"),bathrooms:d.get("bathrooms")},onSelected:h}),(0,l.jsx)(O,{values:{priceForm:d.get("price_from"),priceTo:d.get("price_to")},onChange:h}),(0,l.jsx)(V,{values:{areaFrom:d.get("area_from"),areaTo:d.get("area_to")},onChange:h})]}),(0,l.jsx)("div",{className:"flex justify-end py-2",children:(0,l.jsx)(H,{value:d.get("sort"),onChange:h})})]}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:i.map(e=>(0,l.jsx)(x,{property:e},e.id))}),(0,l.jsx)("div",{className:"py-4 sticky bottom-0 bg-black border-t border-cyan-950"+(s>1?"":" hidden"),children:(0,l.jsx)(L,{pagesNumber:s,currentPage:null!==(e="string"==typeof(a=d.get("page"))&&"string"==typeof(r=a)&&/^([1-9]\d*)$/.test(r)?Number(a):null)&&void 0!==e?e:1,onPageSelected:h})})]})}}},function(e){e.O(0,[901,971,69,744],function(){return e(e.s=4645)}),_N_E=e.O()}]);