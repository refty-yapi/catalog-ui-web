(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{985:function(e,l,t){Promise.resolve().then(t.bind(t,8868)),Promise.resolve().then(t.t.bind(t,3385,23))},8868:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return A}});var a=t(3827),s=t(4090),n=t(7907),r=t(146),i=t(8792),c=t(4692),o=t(8053);let u=()=>(0,a.jsxs)("header",{className:"flex items-center justify-between p-4 rounded-bl-lg rounded-br-lg sticky top-0 z-50 ".concat(o.M.darkBg),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:"/logo.webp",alt:"Refty",className:"h-8 w-8 mr-2"}),(0,a.jsx)(i.default,{href:"/",children:(0,a.jsx)("span",{className:"text-lg font-bold ".concat(o.M.inverseTxt),children:"Refty"})})]}),(0,a.jsx)(c.K,{onClick:()=>{},isDark:!1,children:"⭐️ Save Search"})]});var d=t(8745),m=t(5460);function x(){let[e,l]=(0,s.useState)(null),t=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]);let r=async()=>{localStorage.removeItem("user"),document.cookie="auth_token=; Max-Age=0; path=/",sessionStorage.clear(),t.push("/auth")};return e?(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mt-16 mb-4",children:"Profile"}),(0,a.jsxs)("p",{children:["Email: ",e.email]}),e.name&&(0,a.jsxs)("p",{children:["Name: ",e.name]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(c.K,{isDark:!0,onClick:r,children:"Logout"})})]}):null}let h=e=>{let{value:l,onChange:t,options:s}=e;return(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("select",{value:l,onChange:e=>t(e.target.value),className:"block w-full p-2 border rounded"+o.M.mainBg,children:s.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})})},p=e=>{let{value:l,onChange:t}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Purpose"}),(0,a.jsx)(h,{value:l,onChange:e=>{t(e)},options:[{value:"for-rent",label:"For Rent"},{value:"for-sale",label:"For Sale"},{value:"",label:"All"}]})]})},v=e=>{let{onPriceChange:l}=e,[t,n]=(0,s.useState)(""),[r,i]=(0,s.useState)("");return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Price Range"}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-1",children:[(0,a.jsx)("input",{type:"number",value:t,onChange:e=>{n(e.target.value),l(e.target.value,r)},placeholder:"Min",className:"p-2 border rounded w-1/2"}),(0,a.jsx)("input",{type:"number",value:r,onChange:e=>{i(e.target.value),l(t,e.target.value)},placeholder:"Max",className:"p-2 border rounded w-1/2"})]})]})},f=e=>{let{value:l,onChange:t}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rooms"}),(0,a.jsx)(h,{value:l,onChange:t,options:[{value:"studio",label:"Studio"},{value:"1",label:"1 BR"},{value:"2",label:"2 BR"},{value:"3",label:"3 BR"},{value:"4",label:"4 BR"},{value:"5",label:"5 BR"},{value:"6",label:"6 BR"},{value:"7",label:"7 BR"},{value:"7+",label:"7+"}]})]})},j=e=>{let{value:l,onChange:t}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Furnishing"}),(0,a.jsx)(h,{value:l,onChange:t,options:[{value:"furnished",label:"Furnished"},{value:"unfurnished",label:"Unfurnished"},{value:"partly",label:"Partly"}]})]})},g=e=>{let{onAreaChange:l}=e,[t,n]=(0,s.useState)(""),[r,i]=(0,s.useState)("");return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Area"}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-1",children:[(0,a.jsx)("input",{type:"number",value:t,onChange:e=>{n(e.target.value),l(e.target.value,r)},placeholder:"Min",className:"p-2 border rounded w-1/2"}),(0,a.jsx)("input",{type:"number",value:r,onChange:e=>{i(e.target.value),l(t,e.target.value)},placeholder:"Max",className:"p-2 border rounded w-1/2"})]})]})},b=e=>{let{value:l,onChange:t}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Completion Status"}),(0,a.jsx)(h,{value:l,onChange:t,options:[{value:"completed",label:"Completed"},{value:"under-construction",label:"Under-Construction"},{value:"",label:"All"}]})]})},y=e=>{let{onApplyFilters:l}=e,[t,n]=(0,s.useState)({purpose:"for-rent",minPrice:"",maxPrice:"",city:"Dubai",district:["All Districts"],rooms:"studio",furnishing:"furnished",minArea:"",maxArea:"",completionStatus:"completed"});return(0,s.useEffect)(()=>{n({...t,district:["All Districts"]})},[t.city]),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)(p,{value:t.purpose,onChange:e=>n({...t,purpose:e})}),(0,a.jsx)(v,{onPriceChange:(e,l)=>n({...t,minPrice:e,maxPrice:l})}),(0,a.jsx)(f,{value:t.rooms,onChange:e=>n({...t,rooms:e})}),(0,a.jsx)(j,{value:t.furnishing,onChange:e=>n({...t,furnishing:e})}),(0,a.jsx)(g,{onAreaChange:(e,l)=>n({...t,minArea:e,maxArea:l})}),(0,a.jsx)(b,{value:t.completionStatus,onChange:e=>n({...t,completionStatus:e})}),(0,a.jsx)(c.K,{isDark:!0,onClick:()=>{l(t)},children:"Apply Filters"})]})};var N=t(9381),C=t(3203);function k(e){let{userId:l,onClose:t}=e,{saved:n}=(0,N.Z)(l),[r,i]=(0,s.useState)("Properties");return(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"rounded-md w-100",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold mb-4",children:["Saved ",r]}),(0,a.jsx)("ul",{children:0===n.length?(0,a.jsx)("p",{children:"You haven't selected any favorite properties yet"}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:n.map(e=>(0,a.jsx)(C.Z,{property:e,onClick:t},e.adId))})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(c.K,{onClick:t,isDark:!0,children:"Close"})})]})})}let S=e=>{let{onClose:l,type:t}=e;return(0,s.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),(0,a.jsx)(d.M,{children:(0,a.jsx)(m.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-10 flex justify-center items-center",onClick:l,children:(0,a.jsx)(m.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"".concat(o.M.mainBg," w-full h-full max-h-screen overflow-y-auto p-5 relative"),onClick:e=>e.stopPropagation(),children:(0,a.jsx)("div",{className:"mt-16 mb-16",children:(e=>{switch(e){case"collections":return(0,a.jsx)("div",{children:"Strategy content"});case"saved":return(0,a.jsx)(k,{userId:"123",onClose:l});case"search":l();case"filter":return(0,a.jsx)(y,{onApplyFilters:e=>{console.log(e),l()}});case"profile":return(0,a.jsx)(x,{});default:return null}})(t)})})})})},w=[{id:1,type:"collections",title:"Collections",icon:"⚡️"},{id:2,type:"saved",title:"Saved",icon:"⭐️"},{id:3,type:"search",title:"Search",icon:"\uD83D\uDD0D"},{id:4,type:"filter",title:"Filter",icon:"⚙️"},{id:5,type:"profile",title:"Profile",icon:"\uD83D\uDC64 "}],M=e=>{let{onOpen:l,MenuItem:t,className:s}=e;return(0,a.jsxs)("button",{onClick:()=>l(),className:s,children:[(0,a.jsx)("p",{className:"text-center text-xs sm:text-sm md:text-base lg:text-lg",children:t.icon}),(0,a.jsx)("p",{className:"text-center text-xs sm:text-sm md:text-base lg:text-lg",children:t.title})]})},P=()=>{let[e,l]=(0,s.useState)(!1),[t,n]=(0,s.useState)(null),r=e=>{t===e?(l(!1),n(null)):(n(e),l(!0))},i=()=>{l(!1),n(null)};return(0,a.jsxs)("footer",{children:[(0,a.jsx)("nav",{className:"fixed bottom-0 px-5 w-full shadow-lg flex items-center justify-center z-40 ".concat(o.M.footerBg," ").concat(o.M.inverseTxt),children:w.map(e=>{let l=t===e.type;return(0,a.jsx)(M,{onOpen:()=>r(e.type),MenuItem:e,className:"flex-grow flex-shrink py-2 py-2 items-center\n                  ".concat(l?"".concat(o.M.txt," ").concat(o.M.actionBgColor):"".concat(o.M.inverseTxt," ").concat(o.M.darkBg)," \n                ")},e.id)})}),e&&(0,a.jsx)(S,{type:t,onClose:()=>i()})]})};var D=t(9413);function A(e){let{children:l}=e,t=(0,n.usePathname)(),i=(0,n.useSearchParams)(),c=(0,n.useRouter)(),o="/auth"===t,[d,m]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{async function e(){if(!r.Z.get("auth_token")){c.replace("/auth");return}try{let e=await (0,D.Z)("/verify");(await e.json()).valid||(r.Z.remove("auth_token"),c.replace("/auth"))}catch(e){console.error("Auth check failed:",e),c.replace("/auth")}finally{m(!1)}}o?m(!1):e()},[t,i.toString()]),d)?null:(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[!o&&(0,a.jsx)(u,{}),(0,a.jsx)("main",{className:"flex-grow",children:l}),!o&&(0,a.jsx)(P,{})]})}},3385:function(){}},function(e){e.O(0,[946,429,242,971,69,744],function(){return e(e.s=985)}),_N_E=e.O()}]);