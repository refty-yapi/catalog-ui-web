(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7047:function(e,t,r){Promise.resolve().then(r.bind(r,552))},552:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(3827),n=r(7907),o=r(4090),i=r(2614),c=r(3203);function a(e){let{url:t}=e,[r,n]=(0,o.useState)([]),[a,l]=(0,o.useState)(0),[d,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)(null);async function h(){u(!0),p(null);try{let e=await (0,i.Z)("".concat(t,"?limit=").concat(20,"&offset=").concat(a));if(!e.ok){let t=await e.json();throw Error(t.error||"Unknown error occurred")}let r=await e.json();n(e=>{let t=r.filter(t=>!e.some(e=>e.adId===t.adId)),s=[...e,...t];return sessionStorage.setItem("properties",JSON.stringify(s)),sessionStorage.setItem("offset","".concat(a)),s})}catch(e){p(e.message)}finally{u(!1)}}return(0,o.useEffect)(()=>{let e=sessionStorage.getItem("properties"),t=sessionStorage.getItem("offset"),r=sessionStorage.getItem("scrollPosition");e?(n(JSON.parse(e)),l(t?parseInt(t,10):0),r&&window.scrollTo(0,parseInt(r,10))):h()},[]),(0,o.useEffect)(()=>()=>{sessionStorage.setItem("scrollPosition","".concat(window.scrollY))},[]),(0,o.useEffect)(()=>{0!==a&&h()},[a]),(0,o.useEffect)(()=>{let e=()=>{window.innerHeight+document.documentElement.scrollTop>=.9*document.documentElement.scrollHeight&&!d&&l(e=>e+20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[d]),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:[m&&(0,s.jsxs)("div",{className:"error-message col-span-full",children:["Error: ",m]}),r.map(e=>(0,s.jsx)(c.Z,{property:e},e.adId)),d&&(0,s.jsx)("div",{className:"col-span-full mb-16 text-lg",children:"⌛️ Loading more properties..."})]})}var l=r(407),d=r(7929);let u=[{name:"Telegram",url:"https://t.me/share/url?url="},{name:"WhatsApp",url:"https://api.whatsapp.com/send?text="},{name:"Facebook",url:"https://www.facebook.com/sharer/sharer.php?u="},{name:"Twitter",url:"https://twitter.com/intent/tweet?url="},{name:"LinkedIn",url:"https://www.linkedin.com/shareArticle?url="}];function m(){let[e,t]=(0,o.useState)(""),[r,n]=(0,o.useState)(!1),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{t(window.location.href)},[]),(0,o.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&n(!1)}return r?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]),(0,s.jsxs)("div",{className:"relative",ref:i,children:[(0,s.jsx)("button",{onClick:()=>n(e=>!e),className:"flex items-center space-x-1 text-lime-100 hover:text-blue-600 border border-gray-300 px-3 py-2 rounded-md text-sm font-medium transition bg-stone-700",children:(0,s.jsx)("span",{children:"\uD83D\uDD17 Share"})}),r&&(0,s.jsx)("div",{className:"absolute top-full left-0 mt-2 w-40 bg-white border rounded-md shadow-lg",children:u.map(t=>{let{name:r,url:n}=t;return(0,s.jsx)("a",{href:"".concat(n).concat(encodeURIComponent(e)),target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:r},r)})})]})}var p=r(9381),h=r(4692);function x(e){let{property:t,userId:r,onClick:n}=e,{saved:o,addSaved:i,removeSaved:c}=(0,p.Z)(r),a=o.includes(t);return(0,s.jsx)(h.K,{onClick:()=>{a?c(t):i(t),n()},children:(0,s.jsx)("span",{className:"text-md",children:a?"❤️":"\uD83E\uDD0D"})})}function f(e){var t;let{propertyId:r}=e;(0,n.useRouter)();let[c,a]=(0,o.useState)(null),[u,p]=(0,o.useState)(!0),[h,f]=(0,o.useState)(null),[g,j]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{(async function(){if(r){p(!0),f(null);try{let e=await (0,i.Z)("/properties?id=".concat(r));if(!e.ok){let t=await e.json();throw Error(t.error||"Unknown error occurred")}let t=await e.json();a(t)}catch(e){f(e.message)}finally{p(!1)}}})()},[r]),u)?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:"⌛️ Loading property details..."}):h?(0,s.jsxs)("div",{className:"flex justify-center items-center h-screen",children:["Error: ",h]}):c?(0,s.jsxs)("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800"}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:[(0,d.pn)(c.purpose)," - ",c.category_name," - ",c.building," - ",null!==(t=c.tail_location)&&void 0!==t?t:c.distict]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("span",{className:"bg-blue-100 text-blue-700 px-4 py-2 inline-block rounded text-xl font-semibold",children:["AED ",(0,d.JZ)(c.price)]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsx)("div",{children:c.photos&&c.photos.length>0&&(0,s.jsx)(l.Z,{photos:c.photos,dynamicSlides:!0})}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 text-gray-600 mb-4",children:[(0,s.jsxs)("span",{children:["\uD83D\uDECF️ ",(0,d.z8)(c.rooms).split(" ")[0]," Beds"]}),(0,s.jsxs)("span",{children:["\uD83D\uDEC1 ",c.baths," Baths"]}),(0,s.jsxs)("span",{children:["\uD83D\uDCCF ",c.area.toFixed(2)," sqm"]})]}),(0,s.jsxs)("div",{className:"flex mt-4 gap-4",children:[(0,s.jsx)(m,{}),(0,s.jsx)(x,{property:c,userId:"123",onClick:()=>{j(!g)}})]})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,s.jsx)("img",{src:c.photo_broker,alt:"Agent",className:"w-16 h-16 rounded-full object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Refty Agent"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Refty Agency"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition text-sm",children:"Contact"}),(0,s.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm",children:"Call"})]})]})})]})]}):(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Not found"})}function g(){let e=(0,n.useSearchParams)().get("property");return(0,s.jsxs)(s.Fragment,{children:[!e&&(0,s.jsx)(a,{url:"/properties"}),e&&(0,s.jsx)(f,{propertyId:e})]})}},2614:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}r.d(t,{Z:function(){return o}});var n=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=s({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var c in o)o[c]&&(i+="; "+c,!0!==o[c]&&(i+="="+o[c].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],s={},n=0;n<r.length;n++){var o=r[n].split("="),i=o.slice(1).join("=");try{var c=decodeURIComponent(o[0]);if(s[c]=t.read(i,c),e===c)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){n(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.token;r||(r=n.get("auth_token"));let s={"Content-Type":"application/json",...t.headers,...r&&{Authorization:"Bearer ".concat(r)}};try{let r=await fetch("https://api.refty.ai"+e,{...t,headers:s});if(!r.ok)throw Error("Request Error: ".concat(r.status));return r}catch(e){throw console.error("Fetch error:",e),e}}}},function(e){e.O(0,[768,538,971,69,744],function(){return e(e.s=7047)}),_N_E=e.O()}]);